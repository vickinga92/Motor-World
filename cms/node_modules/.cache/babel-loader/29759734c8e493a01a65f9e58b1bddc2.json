{"ast":null,"code":"var _jsxFileName = \"/home/ubuntu/PROYECTOS/vikijor/MotorWorld/Motor-World/cms/src/components/contents/usuarios/EditarBorrarUsuarios.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from 'react';\nimport $ from 'jquery';\nimport Swal from 'sweetalert2';\nimport { rutaAPI } from '../../../config/Config';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function EditarBorrarUsuarios() {\n  _s();\n\n  /*=============================================\n  Hook para capturar datos\n  =============================================*/\n  const [usuarios, editarUsuarios] = useState({\n    profile: \"\",\n    id: \"\"\n  });\n  /*=============================================\n  OnChange\n  =============================================*/\n\n  const cambiaFormPost = e => {\n    editarUsuarios({ ...usuarios,\n      [e.target.name]: e.target.value\n    });\n  };\n  /*=============================================\n  OnSubmit\n  =============================================*/\n\n\n  const submitPost = async e => {\n    $('.alert').remove();\n    e.preventDefault();\n    const {\n      profile\n    } = usuarios;\n    console.log(profile);\n\n    if (profile !== \"admin\" && profile !== \"user\") {\n      $(\".invalid-profile\").show();\n      $(\".invalid-profile\").html(\"Elige un perfil correcto\");\n      return;\n    }\n    /*=============================================\n    EJECTUAMOS SERVICIO PUT \n    =============================================*/\n\n\n    const result = await putData(usuarios);\n\n    if (result.status === 400) {\n      $(\".modal-footer\").before(`<div class=\"alert alert-danger\">${result.mensaje}</div>`);\n    }\n\n    if (result.status === 200) {\n      $(\".modal-footer\").before(`<div class=\"alert alert-success\">${result.mensaje}</div>`);\n      $('button[type=\"submit\"]').remove();\n      setTimeout(() => {\n        window.location.href = \"/\";\n      }, 3000);\n    }\n  };\n  /*=============================================\n  CAPTURAMOS DATOS PARA EDITAR\n  =============================================*/\n\n\n  $(document).on(\"click\", \".editarInputs\", function (e) {\n    e.preventDefault();\n    let data = $(this).attr(\"data\").split(',');\n    $(\"#mostrarUsuario\").val(data[1]);\n    $(\"#editarProfile\").val(data[2]);\n    editarUsuarios({\n      'profile': $(\"#editarProfile\").val(),\n      'id': data[0]\n    });\n  });\n  /*=============================================\n  CAPTURAMOS DATOS PARA BORRAR\n  =============================================*/\n\n  $(document).on(\"click\", \".borrarInput\", function (e) {\n    e.preventDefault();\n    let data = $(this).attr(\"data\").split(',')[0];\n    Swal.fire({\n      title: '¿Está seguro de eliminar este registro?',\n      icon: 'warning',\n      showCancelButton: true,\n      confirmButtonColor: '#3085d6',\n      cancelButtonColor: '#d33',\n      confirmButtonText: '¡Si, eliminar registro!',\n      cancelButtonText: 'Cancelar'\n    }).then(result => {\n      if (result.value) {\n        const borrarAdministrador = async () => {\n          const result = await deleteData(data);\n\n          if (result.status === 400) {\n            Swal.fire({\n              icon: \"error\",\n              title: result.mensaje,\n              showConfirmButton: true,\n              confirmButtonText: \"Cerrar\"\n            }).then(function (result) {\n              if (result.value) {\n                window.location.href = \"/\";\n              }\n            });\n          }\n\n          if (result.status === 200) {\n            Swal.fire({\n              icon: \"success\",\n              title: result.mensaje,\n              showConfirmButton: true,\n              confirmButtonText: \"Cerrar\"\n            }).then(function (result) {\n              if (result.value) {\n                window.location.href = \"/\";\n              }\n            });\n          }\n        };\n\n        borrarAdministrador();\n      }\n    });\n  });\n  /*=============================================\n  Retornamos vista del componente\n  =============================================*/\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"modal\",\n    id: \"editarAdmin\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"modal-dialog\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"modal-content\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"modal-header\",\n          children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n            className: \"modal-title\",\n            children: \"Cambia el perfil del usuario\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 192,\n            columnNumber: 6\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            className: \"close\",\n            \"data-dismiss\": \"modal\",\n            children: \"\\xD7\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 193,\n            columnNumber: 6\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 191,\n          columnNumber: 5\n        }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n          onChange: cambiaFormPost,\n          onSubmit: submitPost,\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"modal-body\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"form-group\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"small text-secondary\",\n                htmlFor: \"mostrarUsuario\",\n                children: \"Email del usuario\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 205,\n                columnNumber: 12\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"input-group mb-3\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"input-group-append input-group-text\",\n                  children: /*#__PURE__*/_jsxDEV(\"i\", {\n                    className: \"fas fa-user\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 210,\n                    columnNumber: 14\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 209,\n                  columnNumber: 13\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  id: \"mostrarUsuario\",\n                  type: \"text\",\n                  className: \"form-control text-lowercase\",\n                  name: \"usuario\",\n                  disabled: true\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 213,\n                  columnNumber: 13\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 207,\n                columnNumber: 12\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 202,\n              columnNumber: 11\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"form-group\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"small text-secondary\",\n                htmlFor: \"editarProfile\",\n                children: \"Elige el perfil de usuario\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 228,\n                columnNumber: 12\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"input-group mb-3\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"input-group-append input-group-text\",\n                  children: /*#__PURE__*/_jsxDEV(\"i\", {\n                    className: \"fas fa-id-badge\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 233,\n                    columnNumber: 14\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 232,\n                  columnNumber: 13\n                }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n                  id: \"editarProfile\",\n                  className: \"form-control\",\n                  name: \"profile\",\n                  required: true,\n                  children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                    value: \"admin\",\n                    children: \"Admin\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 242,\n                    columnNumber: 29\n                  }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                    value: \"user\",\n                    children: \"User\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 243,\n                    columnNumber: 29\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 236,\n                  columnNumber: 13\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"invalid-feedback invalid-profile\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 247,\n                  columnNumber: 29\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 230,\n                columnNumber: 12\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 226,\n              columnNumber: 23\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 200,\n            columnNumber: 10\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"modal-footer d-flex justify-content-between\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              children: /*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"button\",\n                className: \"btn btn-danger\",\n                \"data-dismiss\": \"modal\",\n                children: \"Cerrar\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 258,\n                columnNumber: 16\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 258,\n              columnNumber: 11\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: /*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"submit\",\n                className: \"btn btn-primary\",\n                children: \"Enviar\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 260,\n                columnNumber: 16\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 260,\n              columnNumber: 11\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 256,\n            columnNumber: 10\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 198,\n          columnNumber: 8\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 190,\n        columnNumber: 4\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 189,\n      columnNumber: 3\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 188,\n    columnNumber: 2\n  }, this);\n}\n/*=============================================\nPETICIÓN PUT usuarios\n=============================================*/\n\n_s(EditarBorrarUsuarios, \"CMfGY6cDwbYmzR4GCLBt3CiHNkc=\");\n\n_c = EditarBorrarUsuarios;\n\nconst putData = data => {\n  const url = `${rutaAPI}/users/${data.id}`;\n  const params = {\n    method: \"PUT\",\n    body: JSON.stringify(data),\n    headers: {\n      \"Content-Type\": \"application/json\",\n      \"Authorization\": `Bearer ${window.localStorage.getItem(\"ACCESS_TOKEN\")}`\n    }\n  };\n  return fetch(url, params).then(response => {\n    return response.json();\n  }).then(result => {\n    return result;\n  }).catch(err => {\n    return err;\n  });\n};\n/*=============================================\nPETICIÓN DELETE usuarios\n=============================================*/\n\n\nconst deleteData = data => {\n  const url = `${rutaAPI}/users/${data}`;\n  const params = {\n    method: \"DELETE\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n      \"Authorization\": `Bearer ${window.localStorage.getItem(\"ACCESS_TOKEN\")}`\n    }\n  };\n  return fetch(url, params).then(response => {\n    return response.json();\n  }).then(result => {\n    return result;\n  }).catch(err => {\n    return err;\n  });\n};\n\nvar _c;\n\n$RefreshReg$(_c, \"EditarBorrarUsuarios\");","map":{"version":3,"sources":["/home/ubuntu/PROYECTOS/vikijor/MotorWorld/Motor-World/cms/src/components/contents/usuarios/EditarBorrarUsuarios.js"],"names":["React","useState","$","Swal","rutaAPI","EditarBorrarUsuarios","usuarios","editarUsuarios","profile","id","cambiaFormPost","e","target","name","value","submitPost","remove","preventDefault","console","log","show","html","result","putData","status","before","mensaje","setTimeout","window","location","href","document","on","data","attr","split","val","fire","title","icon","showCancelButton","confirmButtonColor","cancelButtonColor","confirmButtonText","cancelButtonText","then","borrarAdministrador","deleteData","showConfirmButton","url","params","method","body","JSON","stringify","headers","localStorage","getItem","fetch","response","json","catch","err"],"mappings":";;;AAAA,OAAOA,KAAP,IAAeC,QAAf,QAA8B,OAA9B;AACA,OAAOC,CAAP,MAAc,QAAd;AACA,OAAOC,IAAP,MAAiB,aAAjB;AACA,SAASC,OAAT,QAAwB,wBAAxB;;AAEA,eAAe,SAASC,oBAAT,GAA+B;AAAA;;AAG7C;AACD;AACA;AAEC,QAAM,CAACC,QAAD,EAAWC,cAAX,IAA8BN,QAAQ,CAAC;AAEtCO,IAAAA,OAAO,EAAC,EAF8B;AAG5CC,IAAAA,EAAE,EAAC;AAHyC,GAAD,CAA5C;AAOA;AACD;AACA;;AAEC,QAAMC,cAAc,GAAGC,CAAC,IAAI;AAExBJ,IAAAA,cAAc,CAAC,EAEjB,GAAGD,QAFc;AAGjB,OAACK,CAAC,CAACC,MAAF,CAASC,IAAV,GAAkBF,CAAC,CAACC,MAAF,CAASE;AAHV,KAAD,CAAd;AAOH,GATD;AAWA;AACD;AACA;;;AAEC,QAAMC,UAAU,GAAG,MAAMJ,CAAN,IAAW;AAE7BT,IAAAA,CAAC,CAAC,QAAD,CAAD,CAAYc,MAAZ;AAEAL,IAAAA,CAAC,CAACM,cAAF;AAEA,UAAM;AAAET,MAAAA;AAAF,QAAcF,QAApB;AAEMY,IAAAA,OAAO,CAACC,GAAR,CAAYX,OAAZ;;AAEA,QAAIA,OAAO,KAAK,OAAZ,IAAuBA,OAAO,KAAK,MAAvC,EAA8C;AAEnDN,MAAAA,CAAC,CAAC,kBAAD,CAAD,CAAsBkB,IAAtB;AACAlB,MAAAA,CAAC,CAAC,kBAAD,CAAD,CAAsBmB,IAAtB,CAA2B,0BAA3B;AAEA;AACA;AAGD;AACF;AACA;;;AAEE,UAAMC,MAAM,GAAG,MAAMC,OAAO,CAACjB,QAAD,CAA5B;;AAEA,QAAGgB,MAAM,CAACE,MAAP,KAAkB,GAArB,EAAyB;AAExBtB,MAAAA,CAAC,CAAC,eAAD,CAAD,CAAmBuB,MAAnB,CAA2B,mCAAkCH,MAAM,CAACI,OAAQ,QAA5E;AAEA;;AAED,QAAGJ,MAAM,CAACE,MAAP,KAAkB,GAArB,EAAyB;AAExBtB,MAAAA,CAAC,CAAC,eAAD,CAAD,CAAmBuB,MAAnB,CAA2B,oCAAmCH,MAAM,CAACI,OAAQ,QAA7E;AAEAxB,MAAAA,CAAC,CAAC,uBAAD,CAAD,CAA2Bc,MAA3B;AAEAW,MAAAA,UAAU,CAAC,MAAI;AAACC,QAAAA,MAAM,CAACC,QAAP,CAAgBC,IAAhB,GAAsB,GAAtB;AAA2B,OAAjC,EAAkC,IAAlC,CAAV;AAEA;AAED,GAzCD;AA2CA;AACD;AACA;;;AAEC5B,EAAAA,CAAC,CAAC6B,QAAD,CAAD,CAAYC,EAAZ,CAAe,OAAf,EAAwB,eAAxB,EAAyC,UAASrB,CAAT,EAAW;AAEnDA,IAAAA,CAAC,CAACM,cAAF;AAEA,QAAIgB,IAAI,GAAG/B,CAAC,CAAC,IAAD,CAAD,CAAQgC,IAAR,CAAa,MAAb,EAAqBC,KAArB,CAA2B,GAA3B,CAAX;AAEAjC,IAAAA,CAAC,CAAC,iBAAD,CAAD,CAAqBkC,GAArB,CAAyBH,IAAI,CAAC,CAAD,CAA7B;AACM/B,IAAAA,CAAC,CAAC,gBAAD,CAAD,CAAoBkC,GAApB,CAAwBH,IAAI,CAAC,CAAD,CAA5B;AAEN1B,IAAAA,cAAc,CAAC;AAEd,iBAAaL,CAAC,CAAC,gBAAD,CAAD,CAAoBkC,GAApB,EAFC;AAGd,YAAQH,IAAI,CAAC,CAAD;AAHE,KAAD,CAAd;AAQA,GAjBD;AAmBA;AACD;AACA;;AAEK/B,EAAAA,CAAC,CAAC6B,QAAD,CAAD,CAAYC,EAAZ,CAAe,OAAf,EAAwB,cAAxB,EAAwC,UAASrB,CAAT,EAAW;AAEtDA,IAAAA,CAAC,CAACM,cAAF;AAEI,QAAIgB,IAAI,GAAG/B,CAAC,CAAC,IAAD,CAAD,CAAQgC,IAAR,CAAa,MAAb,EAAqBC,KAArB,CAA2B,GAA3B,EAAgC,CAAhC,CAAX;AAEJhC,IAAAA,IAAI,CAACkC,IAAL,CAAU;AACRC,MAAAA,KAAK,EAAE,yCADC;AAERC,MAAAA,IAAI,EAAE,SAFE;AAGRC,MAAAA,gBAAgB,EAAE,IAHV;AAIRC,MAAAA,kBAAkB,EAAE,SAJZ;AAKRC,MAAAA,iBAAiB,EAAE,MALX;AAMRC,MAAAA,iBAAiB,EAAE,yBANX;AAOFC,MAAAA,gBAAgB,EAAE;AAPhB,KAAV,EAQGC,IARH,CAQSvB,MAAD,IAAY;AAClB,UAAIA,MAAM,CAACR,KAAX,EAAkB;AAGnB,cAAMgC,mBAAmB,GAAG,YAAW;AAEtC,gBAAMxB,MAAM,GAAG,MAAMyB,UAAU,CAACd,IAAD,CAA/B;;AAEA,cAAIX,MAAM,CAACE,MAAP,KAAkB,GAAtB,EAA0B;AAEzBrB,YAAAA,IAAI,CAACkC,IAAL,CAAU;AACME,cAAAA,IAAI,EAAC,OADX;AAEMD,cAAAA,KAAK,EAAEhB,MAAM,CAACI,OAFpB;AAGMsB,cAAAA,iBAAiB,EAAE,IAHzB;AAIML,cAAAA,iBAAiB,EAAE;AAJzB,aAAV,EAMYE,IANZ,CAMiB,UAASvB,MAAT,EAAgB;AAEtB,kBAAGA,MAAM,CAACR,KAAV,EAAgB;AAEfc,gBAAAA,MAAM,CAACC,QAAP,CAAgBC,IAAhB,GAAsB,GAAtB;AAEA;AAEF,aAdV;AAgBA;;AAED,cAAGR,MAAM,CAACE,MAAP,KAAkB,GAArB,EAAyB;AAExBrB,YAAAA,IAAI,CAACkC,IAAL,CAAU;AACME,cAAAA,IAAI,EAAC,SADX;AAEMD,cAAAA,KAAK,EAAEhB,MAAM,CAACI,OAFpB;AAGMsB,cAAAA,iBAAiB,EAAE,IAHzB;AAIML,cAAAA,iBAAiB,EAAE;AAJzB,aAAV,EAMYE,IANZ,CAMiB,UAASvB,MAAT,EAAgB;AAEtB,kBAAGA,MAAM,CAACR,KAAV,EAAgB;AAEfc,gBAAAA,MAAM,CAACC,QAAP,CAAgBC,IAAhB,GAAsB,GAAtB;AAEA;AAEF,aAdV;AAgBA;AAED,SA5CD;;AA8CAgB,QAAAA,mBAAmB;AAEjB;AAEF,KA9DD;AAgEA,GAtEG;AAyEJ;AACD;AACA;;AAEC,sBAEA;AAAK,IAAA,SAAS,EAAC,OAAf;AAAuB,IAAA,EAAE,EAAC,aAA1B;AAAA,2BACC;AAAK,MAAA,SAAS,EAAC,cAAf;AAAA,6BACC;AAAK,QAAA,SAAS,EAAC,eAAf;AAAA,gCACC;AAAK,UAAA,SAAS,EAAC,cAAf;AAAA,kCACC;AAAI,YAAA,SAAS,EAAC,aAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBADD,eAEC;AAAQ,YAAA,IAAI,EAAC,QAAb;AAAsB,YAAA,SAAS,EAAC,OAAhC;AAAwC,4BAAa,OAArD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAFD;AAAA;AAAA;AAAA;AAAA;AAAA,gBADD,eAQI;AAAM,UAAA,QAAQ,EAAEpC,cAAhB;AAAgC,UAAA,QAAQ,EAAEK,UAA1C;AAAA,kCAEE;AAAK,YAAA,SAAS,EAAC,YAAf;AAAA,oCAEC;AAAK,cAAA,SAAS,EAAC,YAAf;AAAA,sCAGC;AAAO,gBAAA,SAAS,EAAC,sBAAjB;AAAwC,gBAAA,OAAO,EAAC,gBAAhD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAHD,eAKC;AAAK,gBAAA,SAAS,EAAC,kBAAf;AAAA,wCAEC;AAAK,kBAAA,SAAS,EAAC,qCAAf;AAAA,yCACC;AAAG,oBAAA,SAAS,EAAC;AAAb;AAAA;AAAA;AAAA;AAAA;AADD;AAAA;AAAA;AAAA;AAAA,wBAFD,eAMC;AACC,kBAAA,EAAE,EAAC,gBADJ;AAEC,kBAAA,IAAI,EAAC,MAFN;AAGC,kBAAA,SAAS,EAAC,6BAHX;AAIC,kBAAA,IAAI,EAAC,SAJN;AAKC,kBAAA,QAAQ;AALT;AAAA;AAAA;AAAA;AAAA,wBAND;AAAA;AAAA;AAAA;AAAA;AAAA,sBALD;AAAA;AAAA;AAAA;AAAA;AAAA,oBAFD,eA0Ba;AAAK,cAAA,SAAS,EAAC,YAAf;AAAA,sCAEX;AAAO,gBAAA,SAAS,EAAC,sBAAjB;AAAwC,gBAAA,OAAO,EAAC,eAAhD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAFW,eAIX;AAAK,gBAAA,SAAS,EAAC,kBAAf;AAAA,wCAEC;AAAK,kBAAA,SAAS,EAAC,qCAAf;AAAA,yCACC;AAAG,oBAAA,SAAS,EAAC;AAAb;AAAA;AAAA;AAAA;AAAA;AADD;AAAA;AAAA;AAAA;AAAA,wBAFD,eAMC;AACC,kBAAA,EAAE,EAAC,eADJ;AAEC,kBAAA,SAAS,EAAC,cAFX;AAGC,kBAAA,IAAI,EAAC,SAHN;AAIC,kBAAA,QAAQ,MAJT;AAAA,0CAMgB;AAAQ,oBAAA,KAAK,EAAC,OAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0BANhB,eAOgB;AAAQ,oBAAA,KAAK,EAAC,MAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0BAPhB;AAAA;AAAA;AAAA;AAAA;AAAA,wBAND,eAiBiB;AAAK,kBAAA,SAAS,EAAC;AAAf;AAAA;AAAA;AAAA;AAAA,wBAjBjB;AAAA;AAAA;AAAA;AAAA;AAAA,sBAJW;AAAA;AAAA;AAAA;AAAA;AAAA,oBA1Bb;AAAA;AAAA;AAAA;AAAA;AAAA,kBAFF,eA0DE;AAAK,YAAA,SAAS,EAAC,6CAAf;AAAA,oCAEC;AAAA,qCAAK;AAAQ,gBAAA,IAAI,EAAC,QAAb;AAAsB,gBAAA,SAAS,EAAC,gBAAhC;AAAiD,gCAAa,OAA9D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAL;AAAA;AAAA;AAAA;AAAA,oBAFD,eAIC;AAAA,qCAAK;AAAQ,gBAAA,IAAI,EAAC,QAAb;AAAsB,gBAAA,SAAS,EAAC,iBAAhC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAL;AAAA;AAAA;AAAA;AAAA,oBAJD;AAAA;AAAA;AAAA;AAAA;AAAA,kBA1DF;AAAA;AAAA;AAAA;AAAA;AAAA,gBARJ;AAAA;AAAA;AAAA;AAAA;AAAA;AADD;AAAA;AAAA;AAAA;AAAA;AADD;AAAA;AAAA;AAAA;AAAA,UAFA;AAoFA;AAED;AACA;AACA;;GA5QwBV,oB;;KAAAA,oB;;AA8QxB,MAAMkB,OAAO,GAAGU,IAAI,IAAG;AAEtB,QAAMgB,GAAG,GAAI,GAAE7C,OAAQ,UAAS6B,IAAI,CAACxB,EAAG,EAAxC;AAEA,QAAMyC,MAAM,GAAG;AAEdC,IAAAA,MAAM,EAAE,KAFM;AAGRC,IAAAA,IAAI,EAACC,IAAI,CAACC,SAAL,CAAerB,IAAf,CAHG;AAIdsB,IAAAA,OAAO,EAAE;AACR,sBAAgB,kBADR;AAER,uBAAkB,UAAS3B,MAAM,CAAC4B,YAAP,CAAoBC,OAApB,CAA4B,cAA5B,CAA4C;AAF/D;AAJK,GAAf;AAYA,SAAOC,KAAK,CAACT,GAAD,EAAMC,MAAN,CAAL,CAAmBL,IAAnB,CAAwBc,QAAQ,IAAE;AAExC,WAAOA,QAAQ,CAACC,IAAT,EAAP;AAEA,GAJM,EAIJf,IAJI,CAICvB,MAAM,IAAE;AAEf,WAAOA,MAAP;AAEA,GARM,EAQJuC,KARI,CAQEC,GAAG,IAAE;AAEb,WAAOA,GAAP;AAEA,GAZM,CAAP;AAcA,CA9BD;AAgCA;AACA;AACA;;;AAEA,MAAMf,UAAU,GAAGd,IAAI,IAAG;AAEzB,QAAMgB,GAAG,GAAI,GAAE7C,OAAQ,UAAS6B,IAAK,EAArC;AAEA,QAAMiB,MAAM,GAAG;AAEdC,IAAAA,MAAM,EAAE,QAFM;AAGdI,IAAAA,OAAO,EAAE;AACR,sBAAgB,kBADR;AAER,uBAAkB,UAAS3B,MAAM,CAAC4B,YAAP,CAAoBC,OAApB,CAA4B,cAA5B,CAA4C;AAF/D;AAHK,GAAf;AAWA,SAAOC,KAAK,CAACT,GAAD,EAAMC,MAAN,CAAL,CAAmBL,IAAnB,CAAwBc,QAAQ,IAAE;AAExC,WAAOA,QAAQ,CAACC,IAAT,EAAP;AAEA,GAJM,EAIJf,IAJI,CAICvB,MAAM,IAAE;AAEf,WAAOA,MAAP;AAEA,GARM,EAQJuC,KARI,CAQEC,GAAG,IAAE;AAEb,WAAOA,GAAP;AAEA,GAZM,CAAP;AAcA,CA7BD","sourcesContent":["import React, {useState} from 'react';\nimport $ from 'jquery';\nimport Swal from 'sweetalert2';\nimport { rutaAPI } from '../../../config/Config';\n\nexport default function EditarBorrarUsuarios(){\n\n\n\t/*=============================================\n\tHook para capturar datos\n\t=============================================*/\n\n\tconst [usuarios, editarUsuarios ] = useState({\n\n        profile:\"\",\n\t\tid:\"\"\n\n\t})\n\n\t/*=============================================\n\tOnChange\n\t=============================================*/\n\n\tconst cambiaFormPost = e => {\n\n    \teditarUsuarios({\n\n\t\t\t...usuarios,\n\t\t\t[e.target.name] : e.target.value\n\n\t\t})\n\n\t}\n\n\t/*=============================================\n\tOnSubmit\n\t=============================================*/\n\n\tconst submitPost = async e => {\n\n\t\t$('.alert').remove();\n\n\t\te.preventDefault();\t\n\n\t\tconst { profile } = usuarios;\n\n        console.log(profile);\n\n        if (profile !== \"admin\" && profile !== \"user\"){\n\n\t\t\t$(\".invalid-profile\").show();\n\t\t\t$(\".invalid-profile\").html(\"Elige un perfil correcto\");\n\n\t\t\treturn;\n\t\t}\n\n\t\t\n\t\t/*=============================================\n\t\tEJECTUAMOS SERVICIO PUT \n\t\t=============================================*/\n\n\t\tconst result = await putData(usuarios);\n\n\t\tif(result.status === 400){\n\n\t\t\t$(\".modal-footer\").before(`<div class=\"alert alert-danger\">${result.mensaje}</div>`)\n\n\t\t}\n\n\t\tif(result.status === 200){\n\n\t\t\t$(\".modal-footer\").before(`<div class=\"alert alert-success\">${result.mensaje}</div>`)\n\n\t\t\t$('button[type=\"submit\"]').remove();\n\n\t\t\tsetTimeout(()=>{window.location.href= \"/\";},3000)\n\n\t\t}\n\n\t}\t\n\n\t/*=============================================\n\tCAPTURAMOS DATOS PARA EDITAR\n\t=============================================*/\n\n\t$(document).on(\"click\", \".editarInputs\", function(e){\n\n\t\te.preventDefault();\n\n\t\tlet data = $(this).attr(\"data\").split(',');\n\t\t\n\t\t$(\"#mostrarUsuario\").val(data[1]);\n        $(\"#editarProfile\").val(data[2]);\n\n\t\teditarUsuarios({\n\t\t\t\n\t\t\t'profile' :  $(\"#editarProfile\").val(),\n\t\t\t'id' :  data[0]\n\n\t\t})\n\n\n\t})\n\n\t/*=============================================\n\tCAPTURAMOS DATOS PARA BORRAR\n\t=============================================*/\n\n\t    $(document).on(\"click\", \".borrarInput\", function(e){\n\n\t\te.preventDefault();\n\n\t\t    let data = $(this).attr(\"data\").split(',')[0];\n\t\t\t\n\t\tSwal.fire({\n\t\t  title: '¿Está seguro de eliminar este registro?',\t\t  \n\t\t  icon: 'warning',\n\t\t  showCancelButton: true,\n\t\t  confirmButtonColor: '#3085d6',\n\t\t  cancelButtonColor: '#d33',\n\t\t  confirmButtonText: '¡Si, eliminar registro!',\n          cancelButtonText: 'Cancelar'\n\t\t}).then((result) => {\n\t\t  if (result.value) {\n              \n\n\t\t\tconst borrarAdministrador = async () =>{\n\n\t\t\t\tconst result = await deleteData(data);\n\n\t\t\t\tif (result.status === 400){\n\n\t\t\t\t\tSwal.fire({\n\t                    icon:\"error\",\n\t                    title: result.mensaje,\n\t                    showConfirmButton: true,\n\t                    confirmButtonText: \"Cerrar\"\n\t\t                    \n\t\t            }).then(function(result){\n\n\t\t             \tif(result.value){\n\n\t\t             \t\twindow.location.href= \"/\";\n\n\t\t             \t}\n\n\t\t            })\n\n\t\t\t\t}\n\n\t\t\t\tif(result.status === 200){\n\n\t\t\t\t\tSwal.fire({\n\t                    icon:\"success\",\n\t                    title: result.mensaje,\n\t                    showConfirmButton: true,\n\t                    confirmButtonText: \"Cerrar\"\n\t\t                    \n\t\t            }).then(function(result){\n\n\t\t             \tif(result.value){\n\n\t\t             \t\twindow.location.href= \"/\";\n\n\t\t             \t}\n\n\t\t            })\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tborrarAdministrador();\n\t    \n\t\t  }\n\n\t\t})\t\t\n\n\t})\n\n\n\t/*=============================================\n\tRetornamos vista del componente\n\t=============================================*/\n\n\treturn(\n\n\t<div className=\"modal\" id=\"editarAdmin\">\n\t\t<div className=\"modal-dialog\">\n\t\t\t<div className=\"modal-content\">\n\t\t\t\t<div className=\"modal-header\">\n\t\t\t\t\t<h4 className=\"modal-title\">Cambia el perfil del usuario</h4>\n\t\t\t\t\t<button type=\"button\" className=\"close\" data-dismiss=\"modal\">\n\t\t\t\t\t\t&times;\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\n\t\t\t\t   <form onChange={cambiaFormPost} onSubmit={submitPost}>  \n\n\t\t\t      <div className=\"modal-body\">\n\n\t\t\t      \t<div className=\"form-group\">\n                          \n\n\t\t\t      \t\t<label className=\"small text-secondary\" htmlFor=\"mostrarUsuario\">Email del usuario</label>\n\n\t\t\t      \t\t<div className=\"input-group mb-3\">\n\n\t\t\t      \t\t\t<div className=\"input-group-append input-group-text\">\n\t\t\t      \t\t\t\t<i className=\"fas fa-user\"></i>\n\t\t\t      \t\t\t</div>\n\n\t\t\t      \t\t\t<input \n\t\t\t      \t\t\t\tid=\"mostrarUsuario\"\n\t\t\t      \t\t\t\ttype=\"text\"\n\t\t\t      \t\t\t\tclassName=\"form-control text-lowercase\"\n\t\t\t      \t\t\t\tname=\"usuario\"\t\t\t      \t\t\t\t\n\t\t\t      \t\t\t\tdisabled\n\t\t\t      \t\t\t/>\n\t\t\t      \t\t</div>\t\n\n\t\t\t      \t</div>\n\n\t\t\t      \t\n                      \n                      <div className=\"form-group\">\n\n\t\t\t      \t\t<label className=\"small text-secondary\" htmlFor=\"editarProfile\">Elige el perfil de usuario</label>\n\n\t\t\t      \t\t<div className=\"input-group mb-3\">\n\n\t\t\t      \t\t\t<div className=\"input-group-append input-group-text\">\n\t\t\t      \t\t\t\t<i className=\"fas fa-id-badge\"></i>                                \n\t\t\t      \t\t\t</div>\n\n\t\t\t      \t\t\t<select\n\t\t\t      \t\t\t\tid=\"editarProfile\"\t\t\t      \t\t\t\n\t\t\t      \t\t\t\tclassName=\"form-control\"\n\t\t\t      \t\t\t\tname=\"profile\"\t                                \t\t      \t\t\t\t\t\t\t      \t\t\t\t\n\t\t\t      \t\t\t\trequired\n                            >\n                            <option value=\"admin\">Admin</option>  \n                            <option value=\"user\">User</option>                           \t\t\t      \t\t\t\n\n                            </select>\n\n                            <div className=\"invalid-feedback invalid-profile\"></div>\n\n\t\t\t      \t\t</div>\t\n\n\t\t\t      \t</div>\n\n\t\t\t      </div>\n\n\n\t\t\t      <div className=\"modal-footer d-flex justify-content-between\">\n\n\t\t\t\t      <div><button type=\"button\" className=\"btn btn-danger\" data-dismiss=\"modal\">Cerrar</button></div>\n\n\t\t\t\t      <div><button type=\"submit\" className=\"btn btn-primary\">Enviar</button></div>        \n\n\t\t\t      </div>\n\n\t\t      </form>\n\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\t)\n}\n\n/*=============================================\nPETICIÓN PUT usuarios\n=============================================*/\n\nconst putData = data =>{\n\n\tconst url = `${rutaAPI}/users/${data.id}`;\n\t\n\tconst params = {\n\n\t\tmethod: \"PUT\",\n        body:JSON.stringify(data),\n\t\theaders: {\n\t\t\t\"Content-Type\": \"application/json\",\n\t\t\t\"Authorization\": `Bearer ${window.localStorage.getItem(\"ACCESS_TOKEN\")}`\n\t\t\t\n\t\t}\n\n\t}\n\n\treturn fetch(url, params).then(response=>{\n\n\t\treturn response.json();\n\n\t}).then(result=>{\n\n\t\treturn result;\n\n\t}).catch(err=>{\n\n\t\treturn err;\n\n\t})\n\n}\t\n\n/*=============================================\nPETICIÓN DELETE usuarios\n=============================================*/\n\nconst deleteData = data =>{\n\n\tconst url = `${rutaAPI}/users/${data}`;\n\t\n\tconst params = {\n\n\t\tmethod: \"DELETE\",    \n\t\theaders: {\n\t\t\t\"Content-Type\": \"application/json\",\n\t\t\t\"Authorization\": `Bearer ${window.localStorage.getItem(\"ACCESS_TOKEN\")}`\n\t\t\t\n\t\t}\n\n\t}\n\n\treturn fetch(url, params).then(response=>{\n\n\t\treturn response.json();\n\n\t}).then(result=>{\n\n\t\treturn result;\n\n\t}).catch(err=>{\n\n\t\treturn err;\n\n\t})\n\n}\n\n\n"]},"metadata":{},"sourceType":"module"}