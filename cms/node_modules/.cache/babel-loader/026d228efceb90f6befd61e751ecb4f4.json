{"ast":null,"code":"var _jsxFileName = \"/home/ubuntu/PROYECTOS/vikijor/MotorWorld/Motor-World/cms/src/components/login/Login.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from 'react';\nimport Logo from './logoMoto.jpg';\nimport { rutaAPI } from '../../config/Config';\nimport $ from \"jquery\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Login() {\n  _s();\n\n  /*=============================================\r\n  HOOK PARA INICIAR SESIÓN\r\n  =============================================*/\n  const [administradores, iniciarSesion] = useState({\n    email: \"\",\n    password: \"\"\n  });\n  /*=============================================\r\n  CAPTURAMOS CAMBIOS DEL FORMULARIO PARA EJECUTAR LA FUNCIÓN DEL HOOK\r\n  =============================================*/\n\n  const cambiaForm = e => {\n    iniciarSesion({ ...administradores,\n      [e.target.name]: e.target.value\n    });\n  };\n  /*=============================================\r\n  EJECUTAMOS EL SUBMIT\r\n  =============================================*/\n\n\n  const login = async e => {\n    $(\".alert\").remove();\n    e.preventDefault();\n    const result = await loginAPI(administradores);\n\n    if (result.status !== 200) {\n      $(\"button[type='submit']\").before(`<div class=\"alert alert-danger\">${result.message}</div>`);\n    } else {\n      localStorage.setItem(\"ACCESS_TOKEN\", result.token);\n      localStorage.setItem(\"ID\", result.payload._id);\n      localStorage.setItem(\"USUARIO\", result.payload.email);\n      window.location.href = \"/\";\n    }\n  };\n  /*=============================================\r\n  \tRETORNAMOS LA VISTA\r\n  =============================================*/\n\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"login-page\",\n    style: {\n      minHeight: \"512.391px\"\n    },\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"login-box\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"login-logo\",\n        children: /*#__PURE__*/_jsxDEV(\"img\", {\n          alt: \"AdminLTE Logo\",\n          className: \"brand-image elevation-3\",\n          style: {\n            opacity: 0.8\n          },\n          src: Logo\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 4\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 3\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"card\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"card-body login-card-body\",\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"login-box-msg\",\n            children: \"Llena los campos para iniciar sesi\\xF3n\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 91,\n            columnNumber: 5\n          }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n            onChange: cambiaForm,\n            onSubmit: login,\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"input-group mb-3\",\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"email\",\n                className: \"form-control\",\n                placeholder: \"Email\",\n                name: \"email\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 101,\n                columnNumber: 7\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"input-group-append\",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"input-group-text\",\n                  children: /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"fas fa-user\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 111,\n                    columnNumber: 9\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 110,\n                  columnNumber: 8\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 109,\n                columnNumber: 7\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 99,\n              columnNumber: 6\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"input-group mb-3\",\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"password\",\n                className: \"form-control\",\n                placeholder: \"Password\",\n                name: \"password\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 119,\n                columnNumber: 7\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"input-group-append\",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"input-group-text\",\n                  children: /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"fas fa-lock\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 129,\n                    columnNumber: 9\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 128,\n                  columnNumber: 8\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 127,\n                columnNumber: 7\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 117,\n              columnNumber: 6\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"submit\",\n              className: \"btn btn-primary btn-block\",\n              children: \"Ingresar\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 135,\n              columnNumber: 6\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 97,\n            columnNumber: 5\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 4\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 3\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 2\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 72,\n    columnNumber: 2\n  }, this);\n}\n/*=============================================\r\nPETICIÓN POST PARA LOGIN\r\n=============================================*/\n\n_s(Login, \"Zb5kUiIMg52m4BDPeVh1oj1ov3M=\");\n\n_c = Login;\n\nconst loginAPI = data => {\n  const url = `${rutaAPI}/auth/admin`;\n  const params = {\n    method: 'POST',\n    body: JSON.stringify(data),\n    headers: {\n      \"Content-Type\": \"application/json\"\n    }\n  };\n  return fetch(url, params).then(response => {\n    return response.json();\n  }).then(result => {\n    return result;\n  }).catch(err => {\n    console.log(err);\n    return err;\n  });\n};\n\nvar _c;\n\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"sources":["/home/ubuntu/PROYECTOS/vikijor/MotorWorld/Motor-World/cms/src/components/login/Login.js"],"names":["React","useState","Logo","rutaAPI","$","Login","administradores","iniciarSesion","email","password","cambiaForm","e","target","name","value","login","remove","preventDefault","result","loginAPI","status","before","message","localStorage","setItem","token","payload","_id","window","location","href","minHeight","opacity","data","url","params","method","body","JSON","stringify","headers","fetch","then","response","json","catch","err","console","log"],"mappings":"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","sourcesContent":["import React, {useState} from 'react';\r\nimport Logo from './logoMoto.jpg';\r\nimport { rutaAPI } from '../../config/Config';\r\nimport $ from \"jquery\";\r\n\r\n\r\nexport default function Login () {\r\n\r\n\t/*=============================================\r\n\tHOOK PARA INICIAR SESIÓN\r\n\t=============================================*/\t\r\n\r\n\tconst [administradores, iniciarSesion] = useState({\r\n\r\n\t\temail: \"\",\r\n\t\tpassword: \"\"\r\n\r\n\t});\r\n\r\n\t/*=============================================\r\n\tCAPTURAMOS CAMBIOS DEL FORMULARIO PARA EJECUTAR LA FUNCIÓN DEL HOOK\r\n\t=============================================*/\t\r\n\r\n\tconst cambiaForm = e =>{\t\r\n\r\n\t\tiniciarSesion({\r\n\r\n\t\t\t...administradores,\r\n\t\t\t[e.target.name] : e.target.value\r\n\r\n\t\t})\r\n\r\n\t}\r\n\r\n\t/*=============================================\r\n\tEJECUTAMOS EL SUBMIT\r\n\t=============================================*/\t\r\n\r\n\tconst login = async e => {\r\n\r\n\t\t$(\".alert\").remove();\r\n\r\n\t\te.preventDefault();\r\n\r\n\t\tconst result = await loginAPI(administradores);\t\r\n\r\n\t\tif(result.status !== 200){\r\n\r\n\t\t\t$(\"button[type='submit']\").before(`<div class=\"alert alert-danger\">${result.message}</div>`)\r\n\t\t\r\n\r\n\t\t}else{\r\n\r\n\t\t\tlocalStorage.setItem(\"ACCESS_TOKEN\", result.token);\r\n\t\t\tlocalStorage.setItem(\"ID\", result.payload._id);\r\n\t\t\tlocalStorage.setItem(\"USUARIO\", result.payload.email);\r\n\r\n\t\t\twindow.location.href = \"/\";\r\n\t\t}\r\n\r\n\t}\r\n\r\n\r\n\t/*=============================================\r\n\t\tRETORNAMOS LA VISTA\r\n\t=============================================*/\t\t\r\n\r\n\r\n\r\n\treturn (\r\n\r\n\t<div className=\"login-page\" style={{ minHeight: \"512.391px\" }}>\r\n\r\n\t<div className=\"login-box\">\r\n\r\n\t\t<div className=\"login-logo\">\r\n\r\n\t\t\t<img\r\n\t\t\t\talt=\"AdminLTE Logo\"\r\n\t\t\t\tclassName=\"brand-image elevation-3\"\r\n\t\t\t\tstyle={{ opacity: 0.8 }}\r\n\t\t\t\tsrc={Logo}\r\n\t\t\t/>\r\n\r\n\t\t</div>\t\t\t\r\n\r\n\t\t<div className=\"card\">\r\n\r\n\t\t\t<div className=\"card-body login-card-body\">\r\n\r\n\t\t\t\t<p className=\"login-box-msg\">\r\n\r\n\t\t\t\t\tLlena los campos para iniciar sesión\r\n\r\n\t\t\t\t</p>\r\n\r\n\t\t\t\t<form onChange={cambiaForm} onSubmit={login}>\r\n\r\n\t\t\t\t\t<div className=\"input-group mb-3\">\r\n\r\n\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\ttype=\"email\"\r\n\t\t\t\t\t\t\tclassName=\"form-control\"\r\n\t\t\t\t\t\t\tplaceholder=\"Email\"\r\n\t\t\t\t\t\t\tname=\"email\"\r\n\t\t\t\r\n\t\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t\t<div className=\"input-group-append\">\r\n\t\t\t\t\t\t\t<div className=\"input-group-text\">\r\n\t\t\t\t\t\t\t\t<span className=\"fas fa-user\"></span>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<div className=\"input-group mb-3\">\r\n\r\n\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\ttype=\"password\"\r\n\t\t\t\t\t\t\tclassName=\"form-control\"\r\n\t\t\t\t\t\t\tplaceholder=\"Password\"\r\n\t\t\t\t\t\t\tname=\"password\"\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t\t<div className=\"input-group-append\">\r\n\t\t\t\t\t\t\t<div className=\"input-group-text\">\r\n\t\t\t\t\t\t\t\t<span className=\"fas fa-lock\"></span>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<button\r\n\t\t\t\t\t\ttype=\"submit\"\r\n\t\t\t\t\t\tclassName=\"btn btn-primary btn-block\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\tIngresar\r\n\t\t\t\t\t</button>\r\n\r\n\t\t\t\t</form>\r\n\r\n\t\t\t</div>\r\n\r\n\t\t</div>\r\n\r\n\t</div>\r\n\r\n</div>\r\n\r\n);\r\n}\r\n/*=============================================\r\nPETICIÓN POST PARA LOGIN\r\n=============================================*/\r\n\r\nconst loginAPI = data => {\r\n\r\n\tconst url = `${rutaAPI}/auth/admin`;\r\n\r\n\tconst params = {\r\n\r\n\t\tmethod: 'POST',\r\n\t\tbody: JSON.stringify(data),\r\n\t\theaders:{\r\n\r\n\t\t\t\"Content-Type\": \"application/json\" \r\n\t\t}\r\n\r\n\t}\r\n\r\n\treturn fetch(url, params).then(response=>{\r\n\r\n\r\n\t\treturn response.json();\r\n\r\n\t}).then(result =>{\r\n\r\n\t\treturn result;\r\n\r\n\t}).catch(err =>{\r\n\r\n\t\tconsole.log(err);\r\n\r\n\t\treturn err;\r\n\r\n\t})\r\n\r\n}"]},"metadata":{},"sourceType":"module"}